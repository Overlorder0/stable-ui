import{b as I,d as J,ac as ne,e as K,ab as Q,aW as Z,u as U,r as E,w as k,aX as G,aY as le,o as oe,j as re,s as ie,k as x,n as ge,_ as ce,aZ as A,ao as ee,a_ as ye,a$ as _e,f as L,aJ as ue,b0 as Ne,v as b,E as V,am as Te,an as Pe,b1 as we,b2 as D,b3 as be,b4 as de,b5 as Ce,ap as Ee,b6 as Se,q as ve,g as $e,i as xe,b7 as te,b8 as Be,b9 as ae,ba as ke,aQ as Oe,bb as Re,L as ze,t as Ae,bc as Fe}from"./index.ca89aaee.js";const j=Symbol("tabsRootContextKey"),Le=I({tabs:{type:J(Array),default:()=>ne([])}}),Me={name:"ElTabBar"},Ve=K({...Me,props:Le,setup(e,{expose:l}){const _=e,O="ElTabBar",g=ee(),a=Q(j);a||Z(O,"<el-tabs><el-tab-bar /></el-tabs>");const m=U("tabs"),N=E(),d=E(),o=()=>{let r=0,u=0;const P=["top","bottom"].includes(a.props.tabPosition)?"width":"height",c=P==="width"?"x":"y";return _.tabs.every(t=>{var p,v,$,R;const B=(v=(p=g.parent)==null?void 0:p.refs)==null?void 0:v[`tab-${t.uid}`];if(!B)return!1;if(!t.active)return!0;u=B[`client${A(P)}`];const M=c==="x"?"left":"top";r=B.getBoundingClientRect()[M]-((R=($=B.parentElement)==null?void 0:$.getBoundingClientRect()[M])!=null?R:0);const F=window.getComputedStyle(B);return P==="width"&&(_.tabs.length>1&&(u-=Number.parseFloat(F.paddingLeft)+Number.parseFloat(F.paddingRight)),r+=Number.parseFloat(F.paddingLeft)),!1}),{[P]:`${u}px`,transform:`translate${A(c)}(${r}px)`}},T=()=>d.value=o();return k(()=>_.tabs,async()=>{await G(),T()},{immediate:!0}),le(N,()=>T()),l({ref:N,update:T}),(r,u)=>(oe(),re("div",{ref_key:"barRef",ref:N,class:ie([x(m).e("active-bar"),x(m).is(x(a).props.tabPosition)]),style:ge(d.value)},null,6))}});var De=ce(Ve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Ie=I({panes:{type:J(Array),default:()=>ne([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ke={tabClick:(e,l,_)=>_ instanceof Event,tabRemove:(e,l)=>l instanceof Event},se="ElTabNav",Ue=K({name:se,props:Ie,emits:Ke,setup(e,{expose:l,emit:_}){const O=ee(),g=Q(j);g||Z(se,"<el-tabs><tab-nav /></el-tabs>");const a=U("tabs"),m=ye(),N=_e(),d=E(),o=E(),T=E(),r=E(!1),u=E(0),P=E(!1),c=E(!0),t=L(()=>["top","bottom"].includes(g.props.tabPosition)?"width":"height"),p=L(()=>({transform:`translate${t.value==="width"?"X":"Y"}(-${u.value}px)`})),v=()=>{if(!d.value)return;const s=d.value[`offset${A(t.value)}`],i=u.value;if(!i)return;const n=i>s?i-s:0;u.value=n},$=()=>{if(!d.value||!o.value)return;const s=o.value[`offset${A(t.value)}`],i=d.value[`offset${A(t.value)}`],n=u.value;if(s-n<=i)return;const w=s-n>i*2?n+i:s-i;u.value=w},R=async()=>{const s=o.value;if(!r.value||!T.value||!d.value||!s)return;await G();const i=T.value.querySelector(".is-active");if(!i)return;const n=d.value,w=["top","bottom"].includes(g.props.tabPosition),y=i.getBoundingClientRect(),h=n.getBoundingClientRect(),S=w?s.offsetWidth-h.width:s.offsetHeight-h.height,C=u.value;let f=C;w?(y.left<h.left&&(f=C-(h.left-y.left)),y.right>h.right&&(f=C+y.right-h.right)):(y.top<h.top&&(f=C-(h.top-y.top)),y.bottom>h.bottom&&(f=C+(y.bottom-h.bottom))),f=Math.max(f,0),u.value=Math.min(f,S)},B=()=>{if(!o.value||!d.value)return;const s=o.value[`offset${A(t.value)}`],i=d.value[`offset${A(t.value)}`],n=u.value;if(i<s){const w=u.value;r.value=r.value||{},r.value.prev=w,r.value.next=w+i<s,s-w<i&&(u.value=s-i)}else r.value=!1,n>0&&(u.value=0)},M=s=>{const i=s.code,{up:n,down:w,left:y,right:h}=D;if(![n,w,y,h].includes(i))return;const S=Array.from(s.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),C=S.indexOf(s.target);let f;i===y||i===n?C===0?f=S.length-1:f=C-1:C<S.length-1?f=C+1:f=0,S[f].focus(),S[f].click(),F()},F=()=>{c.value&&(P.value=!0)},q=()=>P.value=!1;return k(m,s=>{s==="hidden"?c.value=!1:s==="visible"&&setTimeout(()=>c.value=!0,50)}),k(N,s=>{s?setTimeout(()=>c.value=!0,50):c.value=!1}),le(T,B),ue(()=>setTimeout(()=>R(),0)),Ne(()=>B()),l({scrollToActiveTab:R,removeFocus:q}),k(()=>e.panes,()=>O.update(),{flush:"post"}),()=>{const s=r.value?[b("span",{class:[a.e("nav-prev"),a.is("disabled",!r.value.prev)],onClick:v},[b(V,null,{default:()=>[b(Te,null,null)]})]),b("span",{class:[a.e("nav-next"),a.is("disabled",!r.value.next)],onClick:$},[b(V,null,{default:()=>[b(Pe,null,null)]})])]:null,i=e.panes.map((n,w)=>{var y,h,S,C;const f=n.uid,W=n.props.disabled,H=(h=(y=n.props.name)!=null?y:n.index)!=null?h:`${w}`,X=!W&&(n.isClosable||e.editable);n.index=`${w}`;const me=X?b(V,{class:"is-icon-close",onClick:z=>_("tabRemove",n,z)},{default:()=>[b(we,null,null)]}):null,pe=((C=(S=n.slots).label)==null?void 0:C.call(S))||n.props.label,he=!W&&n.active?0:-1;return b("div",{ref:`tab-${f}`,class:[a.e("item"),a.is(g.props.tabPosition),a.is("active",n.active),a.is("disabled",W),a.is("closable",X),a.is("focus",P.value)],id:`tab-${H}`,key:`tab-${f}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":n.active,tabindex:he,onFocus:()=>F(),onBlur:()=>q(),onClick:z=>{q(),_("tabClick",n,H,z)},onKeydown:z=>{X&&(z.code===D.delete||z.code===D.backspace)&&_("tabRemove",n,z)}},[pe,me])});return b("div",{ref:T,class:[a.e("nav-wrap"),a.is("scrollable",!!r.value),a.is(g.props.tabPosition)]},[s,b("div",{class:a.e("nav-scroll"),ref:d},[b("div",{class:[a.e("nav"),a.is(g.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(g.props.tabPosition))],ref:o,style:p.value,role:"tablist",onKeydown:M},[e.type?null:b(De,{tabs:[...e.panes]},null),i])])])}}}),je=I({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:J(Function),default:()=>!0},stretch:Boolean}),Y=e=>$e(e)||xe(e),qe={[be]:e=>Y(e),tabClick:(e,l)=>l instanceof Event,tabChange:e=>Y(e),edit:(e,l)=>["remove","add"].includes(l),tabRemove:e=>Y(e),tabAdd:()=>!0};var We=K({name:"ElTabs",props:je,emits:qe,setup(e,{emit:l,slots:_,expose:O}){var g,a;const m=U("tabs"),N=E(),d=de({}),o=E((a=(g=e.modelValue)!=null?g:e.activeName)!=null?a:"0"),T=t=>{o.value=t,l(be,t),l("tabChange",t)},r=async t=>{var p,v,$;if(!(o.value===t||te(t)))try{await((p=e.beforeLeave)==null?void 0:p.call(e,t,o.value))!==!1&&(T(t),($=(v=N.value)==null?void 0:v.removeFocus)==null||$.call(v))}catch{}},u=(t,p,v)=>{t.props.disabled||(r(p),l("tabClick",t,v))},P=(t,p)=>{t.props.disabled||te(t.props.name)||(p.stopPropagation(),l("edit",t.props.name,"remove"),l("tabRemove",t.props.name))},c=()=>{l("edit",void 0,"add"),l("tabAdd")};return Ce({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},L(()=>!!e.activeName)),k(()=>e.activeName,t=>r(t)),k(()=>e.modelValue,t=>r(t)),k(o,async()=>{var t;await G(),(t=N.value)==null||t.scrollToActiveTab()}),Ee(j,{props:e,currentName:o,registerPane:v=>d[v.uid]=v,unregisterPane:v=>delete d[v]}),O({currentName:o}),()=>{const t=e.editable||e.addable?b("span",{class:m.e("new-tab"),tabindex:"0",onClick:c,onKeydown:$=>{$.code===D.enter&&c()}},[b(V,{class:m.is("icon-plus")},{default:()=>[b(Se,null,null)]})]):null,p=b("div",{class:[m.e("header"),m.is(e.tabPosition)]},[t,b(Ue,{ref:N,currentName:o.value,editable:e.editable,type:e.type,panes:Object.values(d),stretch:e.stretch,onTabClick:u,onTabRemove:P},null)]),v=b("div",{class:m.e("content")},[ve(_,"default")]);return b("div",{class:[m.b(),m.m(e.tabPosition),{[m.m("card")]:e.type==="card",[m.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[p,v]:[v,p]])}}});const He=I({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Xe=["id","aria-hidden","aria-labelledby"],Ye={name:"ElTabPane"},Je=K({...Ye,props:He,setup(e){const l=e,_="ElTabPane",O=ee(),g=Be(),a=Q(j);a||Z(_,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const m=U("tab-pane"),N=E(),d=L(()=>l.closable||a.props.closable),o=ae(()=>{var c;return a.currentName.value===((c=l.name)!=null?c:N.value)}),T=E(o.value),r=L(()=>{var c;return(c=l.name)!=null?c:N.value}),u=ae(()=>!l.lazy||T.value||o.value);k(o,c=>{c&&(T.value=!0)});const P=de({uid:O.uid,slots:g,props:l,paneName:r,active:o,index:N,isClosable:d});return ue(()=>{a.registerPane(P)}),ke(()=>{a.unregisterPane(P.uid)}),(c,t)=>x(u)?Oe((oe(),re("div",{key:0,id:`pane-${x(r)}`,class:ie(x(m).b()),role:"tabpanel","aria-hidden":!x(o),"aria-labelledby":`tab-${x(r)}`},[ve(c.$slots,"default")],10,Xe)),[[Re,x(o)]]):ze("v-if",!0)}});var fe=ce(Je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ze=Ae(We,{TabPane:fe}),Ge=Fe(fe);export{Ze as E,Ge as a};
